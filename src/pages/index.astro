---
import Layout from '../layouts/Layout.astro';
import ProductCard from '../components/ProductCard.astro';
import CategoryCard from '../components/CategoryCard.astro';
import BlogCard from '../components/BlogCard.astro';
import BrandCard from '../components/BrandCard.astro';
import FaqSection from '../components/faq/FaqSection.astro';
import { 
  getPublishedProducts, 
  getPublishedArticles, 
  getBrandsWithProductCount,
  getAuthorById 
} from '../utils/dataProcessing';
import data from '../data';

// Get processed data - limit to 9 items
const publishedProducts = getPublishedProducts().slice(0, 9);
const publishedArticles = getPublishedArticles(3);
const brandsWithProductCount = getBrandsWithProductCount(3);

// Get first 9 categories
const categories = data.categories.slice(0, 9);

// Process articles with author data
const articlesWithAuthors = publishedArticles.map(article => {
  const author = getAuthorById(article.author);
  return {
    ...article,
    author: author ? {
      name: author.name,
      avatar: author.avatar
    } : {
      name: 'Unknown Author',
      avatar: '/images/default-avatar.jpg'
    }
  };
});

// FAQ data
const homeFaqs = {
  title: "Preguntas Frecuentes sobre Grabadores L치ser",
  questions: [
    {
      question: "쯈u칠 es un grabador l치ser?",
      answer: "Un grabador l치ser es una m치quina que utiliza tecnolog칤a l치ser para grabar o cortar materiales con alta precisi칩n. Es ideal para crear dise침os personalizados en madera, acr칤lico, cuero y otros materiales."
    },
    {
      question: "쯈u칠 puedo hacer con un grabador l치ser?",
      answer: "Con un grabador l치ser puedes crear se침al칠tica, personalizar regalos, fabricar joyer칤a, hacer decoraci칩n para el hogar, crear productos personalizados para vender, y mucho m치s."
    },
    {
      question: "쯈u칠 debo considerar al comprar un grabador l치ser?",
      answer: "Los factores principales son: potencia del l치ser, 치rea de trabajo, materiales compatibles, software incluido, medidas de seguridad y tu presupuesto."
    }
  ]
};

// Schema data
const schema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Laser Engraver Guide",
  "url": "https://laserengraverguide.com",
  "description": "Gu칤a experta de grabadores l치ser: comparativas, reviews y consejos para elegir el mejor grabador l치ser.",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://laserengraverguide.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
};
---

<Layout>
  <script type="application/ld+json" set:html={JSON.stringify(schema)} />

  <!-- Hero Section -->
  <section class="relative overflow-hidden bg-gradient-to-br from-primary-600 to-primary-800">
    <div class="absolute inset-0">
      <div class="absolute inset-0 bg-gradient-to-br from-primary-600/90 to-primary-800/90"></div>
      <div class="absolute inset-0 bg-[url('/images/hero-pattern.svg')] opacity-10"></div>
    </div>
    <div class="relative max-w-7xl mx-auto py-24 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">
          Encuentra tu <span class="text-primary-200">Grabador L치ser</span> Ideal
        </h1>
        <p class="mt-6 max-w-2xl mx-auto text-xl text-primary-100">
          Reviews expertos, comparativas y gu칤as para ayudarte a elegir el mejor grabador l치ser para tus necesidades.
        </p>
        <div class="mt-10 flex justify-center gap-4">
          <a
            href="/categories/"
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-primary-700 bg-white hover:bg-primary-50 transition-colors duration-300"
          >
            Ver Categor칤as
          </a>
          <a
            href="/blog/"
            class="inline-flex items-center px-6 py-3 border border-white text-base font-medium rounded-full text-white hover:bg-primary-700/50 transition-colors duration-300"
          >
            Leer Blog
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
          Grabadores L치ser Destacados
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Descubre nuestra selecci칩n de los mejores grabadores l치ser del mercado
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {publishedProducts.map((product) => (
          <ProductCard {...product} />
        ))}
      </div>
      <div class="text-center mt-12">
        <a
          href="/buscador/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver todos los grabadores l치ser
          <svg class="ml-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Why Choose Us Section -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          쯇or qu칠 elegirnos? 游꿢
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Tu gu칤a experta en el mundo del grabado l치ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-3">
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">游댌</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Reviews Detalladas</h3>
          <p class="text-gray-600">Analizamos cada grabador l치ser a fondo para ofrecerte informaci칩n precisa y objetiva</p>
        </div>
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">游눠</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Consejos Expertos</h3>
          <p class="text-gray-600">Te ayudamos a elegir el grabador perfecto para tus necesidades espec칤ficas</p>
        </div>
        <div class="text-center p-6">
          <span class="text-4xl mb-4 block">游댃</span>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Actualizaci칩n Constante</h3>
          <p class="text-gray-600">Mantenemos nuestra informaci칩n al d칤a con las 칰ltimas novedades del mercado</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Explora por Categor칤as
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Encuentra el grabador l치ser perfecto para tus necesidades
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {categories.map((category) => (
          <CategoryCard {...category} />
        ))}
      </div>
      <div class="text-center mt-12">
        <a
          href="/categories/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver todas las categor칤as
          <svg class="ml-2 w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Beneficios de las m치quinas de grabado l치ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Descubre las ventajas de utilizar tecnolog칤a l치ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2">
        <div class="bg-gray-50 rounded-2xl p-8">
          <img
            src="/imagenes/grabadora-laser.jpg"
            alt="Grabadora l치ser"
            class="w-full h-48 object-cover rounded-xl mb-6"
          />
          <h3 class="text-xl font-bold text-gray-900 mb-4">Alta Precisi칩n</h3>
          <p class="text-gray-600">
            Los grabadores l치ser ofrecen una precisi칩n incomparable, permitiendo crear dise침os detallados y complejos con exactitud milim칠trica.
          </p>
        </div>
        <div class="bg-gray-50 rounded-2xl p-8">
          <img
            src="/imagenes/grabador-laser.jpg"
            alt="Grabador l치ser"
            class="w-full h-48 object-cover rounded-xl mb-6"
          />
          <h3 class="text-xl font-bold text-gray-900 mb-4">Versatilidad</h3>
          <p class="text-gray-600">
            Trabaja con m칰ltiples materiales: desde madera y acr칤lico hasta cuero y metal, las posibilidades son infinitas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest Blog Posts -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Art칤culos sobre grabado y corte laser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Mantente al d칤a con las 칰ltimas tendencias y consejos en grabado l치ser
        </p>
      </header>
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {articlesWithAuthors.map((article) => (
          <BlogCard {...article} />
        ))}
      </div>
    </div>
  </section>

  <!-- Application Areas -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <header class="text-center mb-12">
        <h2 class="text-3xl font-extrabold text-gray-900">
          Usos de las grabadoras l치ser
        </h2>
        <p class="mt-4 text-xl text-gray-600">
          Explora las infinitas posibilidades del grabado l치ser
        </p>
      </header>
      <div class="grid gap-6 md:grid-cols-4">
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">游꾸</span>
          <h3 class="font-semibold text-gray-900">Regalos Personalizados</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">游끽</span>
          <h3 class="font-semibold text-gray-900">Se침al칠tica Comercial</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">游눐</span>
          <h3 class="font-semibold text-gray-900">Joyer칤a</h3>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 text-center">
          <span class="text-3xl mb-3 block">游</span>
          <h3 class="font-semibold text-gray-900">Decoraci칩n</h3>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQs Section -->
  <section class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <FaqSection {...homeFaqs} />
      <div class="text-center mt-8">
        <a
          href="/faqs/"
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-white bg-primary-600 hover:bg-primary-700 transition-colors"
        >
          Ver Todas las Preguntas Frecuentes
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-primary-600">
    <div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-3xl font-extrabold text-white mb-4">
          쯃isto para empezar con el grabado l치ser?
        </h2>
        <p class="text-xl text-primary-100 mb-8">
          Descubre nuestras gu칤as y encuentra el grabador l치ser perfecto para ti
        </p>
        <div class="flex justify-center gap-4">
          <a
            href="/categories/"
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-full text-primary-700 bg-white hover:bg-primary-50 transition-colors"
          >
            Explorar Grabadores
          </a>
          <a
            href="/blog/"
            class="inline-flex items-center px-6 py-3 border border-white text-base font-medium rounded-full text-white hover:bg-primary-700/50 transition-colors"
          >
            Leer Gu칤as
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>