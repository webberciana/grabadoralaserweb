<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:s="http://www.sitemaps.org/schemas/sitemap/0.9"
  exclude-result-prefixes="s">

  <xsl:output method="html" encoding="UTF-8" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <html lang="es">
      <head>
        <meta charset="UTF-8"/>
        <title>Mapa del sitio</title>
        <style>
          :root { --bg:#0b1220; --card:#0f172a; --text:#e5e7eb; --muted:#94a3b8; --acc:#22c55e; }
          *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
          .wrap{max-width:1100px;margin:40px auto;padding:0 16px}
          header{margin-bottom:18px}
          h1{font-size:28px;margin:0 0 6px}
          .meta{color:var(--muted)}
          .card{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
          table{width:100%;border-collapse:separate;border-spacing:0}
          thead th{font-weight:600;text-align:left;color:var(--muted);padding:12px 12px 10px;border-bottom:1px solid rgba(148,163,184,.2)}
          tbody td{padding:12px;border-bottom:1px solid rgba(148,163,184,.08)}
          tbody tr:hover{background:rgba(255,255,255,.03)}
          a{color:#a5b4fc;text-decoration:none} a:hover{opacity:.9}
          .pill{display:inline-block;padding:.2rem .55rem;border-radius:999px;background:rgba(34,197,94,.15);color:var(--acc);font-weight:600}
          .right{text-align:right}
          .muted{color:var(--muted)}
          .foot{margin-top:12px;color:var(--muted);font-size:12px}
        </style>
      </head>
      <body>
        <div class="wrap">
          <header>
            <h1>Mapa del sitio</h1>
            <div class="meta">
              Total de URLs: <strong><xsl:value-of select="count(s:urlset/s:url)"/></strong>
            </div>
          </header>

          <div class="card">
            <table>
              <thead>
                <tr>
                  <th>URL</th>
                  <th class="right">Prioridad</th>
                  <th class="right">Frecuencia</th>
                  <th class="right">Última modificación</th>
                </tr>
              </thead>
              <tbody>
                <xsl:for-each select="s:urlset/s:url">
                  <!-- Ordena por prioridad desc y fecha desc -->
                  <xsl:sort select="number(s:priority)" data-type="number" order="descending"/>
                  <xsl:sort select="s:lastmod" order="descending"/>
                  <tr>
                    <td>
                      <a href="{s:loc}" target="_blank" rel="noopener">
                        <xsl:value-of select="s:loc"/>
                      </a>
                    </td>
                    <td class="right">
                      <span class="pill">
                        <xsl:value-of select="format-number(number(s:priority),'0.0')"/>
                      </span>
                    </td>
                    <td class="right muted"><xsl:value-of select="s:changefreq"/></td>
                    <td class="right muted"><xsl:value-of select="s:lastmod"/></td>
                  </tr>
                </xsl:for-each>
              </tbody>
            </table>
            <div class="foot">Este estilo es solo para visualización humana; los buscadores ignoran la XSL.</div>
          </div>
        </div>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet>